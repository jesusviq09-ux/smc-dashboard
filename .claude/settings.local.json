{
  "permissions": {
    "allow": [
      "Bash(source:*)",
      "Bash(node:*)",
      "Bash(source ~/.zshrc)",
      "Bash(/opt/homebrew/bin/brew:*)",
      "Bash(/opt/homebrew/bin/brew install:*)",
      "Bash(/usr/local/bin/docker version:*)",
      "Bash(/usr/local/bin/docker ps)",
      "Bash(# Try to check if homebrew is already installed somewhere unusual find /Users/jiq -name \"\"brew\"\" -type f)",
      "Bash(bash)",
      "Bash(export NVM_DIR=\"$HOME/.nvm\")",
      "Bash([ -s \"$NVM_DIR/nvm.sh\" ])",
      "Bash(. \"$NVM_DIR/nvm.sh\")",
      "Bash(nvm install:*)",
      "Bash(npm --version:*)",
      "Bash(bash -c:*)",
      "Bash(NODE_BIN=\"/Users/jiq/.nvm/versions/node/v20.20.0/bin\" export PATH=\"$NODE_BIN:$PATH\" pnpm:*)",
      "Bash(npm install:*)",
      "Bash(pnpm --version:*)",
      "Bash(export PATH=\"/Users/jiq/.nvm/versions/node/v20.20.0/bin:$PATH\")",
      "Bash(export PATH=\"/Users/jiq/.nvm/versions/node/v20.20.0/bin:/usr/bin:/bin:/usr/sbin:/sbin:$PATH\")",
      "Bash(echo:*)",
      "Bash(export PATH=\"/Users/jiq/.nvm/versions/node/v20.20.0/bin:/usr/bin:/bin:$PATH\":*)",
      "Bash(npx tsc:*)",
      "Bash(PATH=\"/Users/jiq/.nvm/versions/node/v20.20.0/bin:/usr/bin:/bin\" npx tsc:*)",
      "Bash(PATH=\"/Users/jiq/.nvm/versions/node/v20.20.0/bin:/usr/bin:/bin\" node:*)",
      "Bash(PATH=\"/Users/jiq/.nvm/versions/node/v20.20.0/bin:/usr/bin:/bin\" node -e:*)",
      "Bash(\"/Users/jiq/Downloads/SMC DASHBOARD/frontend/src/pages/statistics/StatsIndex.tsx\" << 'EOF'\nimport { useQuery } from '@tanstack/react-query'\nimport { BarChart2, TrendingUp, Users, Zap } from 'lucide-react'\nimport { Card, CardContent, StatCard } from '@/components/ui/Card'\nimport { pilotsApi } from '@/services/api/pilots.api'\nimport { trainingApi } from '@/services/api/training.api'\nimport { raceApi } from '@/services/api/race.api'\nimport { calculateWeightedScore } from '@/utils/pilotScore'\nimport type { RaceEvent } from '@/types'\nimport {\n  BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer,\n  LineChart, Line, Legend, RadarChart, Radar, PolarGrid, PolarAngleAxis, PolarRadiusAxis\n} from 'recharts'\n\nexport default function StatsIndex\\(\\) {\n  const { data: pilots = [] } = useQuery\\({ queryKey: ['pilots'], queryFn: pilotsApi.getAll }\\)\n  const { data: sessions = [] } = useQuery\\({ queryKey: ['training-sessions'], queryFn: trainingApi.getSessions }\\)\n  const { data: races = [] } = useQuery<RaceEvent[]>\\({ queryKey: ['races'], queryFn: raceApi.getEvents }\\)\n\n  // Pilot scores bar chart data\n  const pilotScoreData = pilots\n    .map\\(p => \\({ name: p.fullName.split\\(' '\\)[0], score: Number\\(calculateWeightedScore\\(p.ratings, p.weightKg\\).toFixed\\(2\\)\\) }\\)\\)\n    .sort\\(\\(a, b\\) => b.score - a.score\\)\n\n  // Sessions per month\n  const sessionsByMonth: Record<string, number> = {}\n  sessions.forEach\\(s => {\n    const month = s.date?.slice\\(0, 7\\) ?? 'N/A'\n    sessionsByMonth[month] = \\(sessionsByMonth[month] ?? 0\\) + 1\n  }\\)\n  const sessionMonthData = Object.entries\\(sessionsByMonth\\)\n    .sort\\(\\([a], [b]\\) => a.localeCompare\\(b\\)\\)\n    .map\\(\\([month, count]\\) => \\({ month: month.slice\\(5\\), count }\\)\\)\n\n  // Radar data: average team ratings\n  const avgRatings = pilots.length > 0 ? {\n    experience: pilots.reduce\\(\\(s, p\\) => s + \\(p.ratings?.experience ?? 0\\), 0\\) / pilots.length,\n    driving: pilots.reduce\\(\\(s, p\\) => s + \\(p.ratings?.driving ?? 0\\), 0\\) / pilots.length,\n    energyManagement: pilots.reduce\\(\\(s, p\\) => s + \\(p.ratings?.energyManagement ?? 0\\), 0\\) / pilots.length,\n    teamwork: pilots.reduce\\(\\(s, p\\) => s + \\(p.ratings?.teamwork ?? 0\\), 0\\) / pilots.length,\n    consistency: pilots.reduce\\(\\(s, p\\) => s + \\(p.ratings?.consistency ?? 0\\), 0\\) / pilots.length,\n    adaptation: pilots.reduce\\(\\(s, p\\) => s + \\(p.ratings?.adaptation ?? 0\\), 0\\) / pilots.length,\n  } : null\n\n  const radarData = avgRatings ? [\n    { subject: 'Experiencia', A: avgRatings.experience },\n    { subject: 'Conducción', A: avgRatings.driving },\n    { subject: 'Energía', A: avgRatings.energyManagement },\n    { subject: 'Equipo', A: avgRatings.teamwork },\n    { subject: 'Consistencia', A: avgRatings.consistency },\n    { subject: 'Adaptación', A: avgRatings.adaptation },\n  ] : []\n\n  const finishedRaces = races.filter\\(r => r.status === 'completed'\\).length\n  const avgSessionsPilot = pilots.length > 0 ? \\(sessions.length / pilots.length\\).toFixed\\(1\\) : '—'\n\n  return \\(\n    <div className=\"space-y-6\">\n      <h1 className=\"section-title\">Estadísticas del equipo</h1>\n\n      <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-4\">\n        <StatCard label=\"Pilotos\" value={pilots.length} icon={Users} />\n        <StatCard label=\"Sesiones\" value={sessions.length} icon={TrendingUp} />\n        <StatCard label=\"Carreras\" value={`${finishedRaces}/${races.length}`} icon={Zap} />\n        <StatCard label=\"Sesiones/piloto\" value={avgSessionsPilot} icon={BarChart2} />\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <Card title=\"Puntuación por piloto\">\n          <CardContent>\n            {pilotScoreData.length === 0 ? \\(\n              <p className=\"text-sm text-smc-muted text-center py-8\">Sin pilotos</p>\n            \\) : \\(\n              <ResponsiveContainer width=\"100%\" height={220}>\n                <BarChart data={pilotScoreData} layout=\"vertical\">\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#30363d\" />\n                  <XAxis type=\"number\" domain={[0, 10]} stroke=\"#8b949e\" tick={{ fontSize: 10 }} />\n                  <YAxis type=\"category\" dataKey=\"name\" stroke=\"#8b949e\" tick={{ fontSize: 11 }} width={70} />\n                  <Tooltip contentStyle={{ backgroundColor: '#161b22', border: '1px solid #30363d', borderRadius: 8 }} />\n                  <Bar dataKey=\"score\" fill=\"#00d4ff\" radius={[0, 6, 6, 0]} />\n                </BarChart>\n              </ResponsiveContainer>\n            \\)}\n          </CardContent>\n        </Card>\n\n        <Card title=\"Sesiones de entrenamiento por mes\">\n          <CardContent>\n            {sessionMonthData.length === 0 ? \\(\n              <p className=\"text-sm text-smc-muted text-center py-8\">Sin sesiones registradas</p>\n            \\) : \\(\n              <ResponsiveContainer width=\"100%\" height={220}>\n                <LineChart data={sessionMonthData}>\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#30363d\" />\n                  <XAxis dataKey=\"month\" stroke=\"#8b949e\" tick={{ fontSize: 10 }} />\n                  <YAxis stroke=\"#8b949e\" tick={{ fontSize: 10 }} allowDecimals={false} />\n                  <Tooltip contentStyle={{ backgroundColor: '#161b22', border: '1px solid #30363d', borderRadius: 8 }} />\n                  <Line type=\"monotone\" dataKey=\"count\" stroke=\"#f59e0b\" strokeWidth={2} dot={{ r: 4, fill: '#f59e0b' }} name=\"Sesiones\" />\n                </LineChart>\n              </ResponsiveContainer>\n            \\)}\n          </CardContent>\n        </Card>\n      </div>\n\n      {radarData.length > 0 && \\(\n        <Card title=\"Perfil medio del equipo\">\n          <CardContent>\n            <div className=\"flex justify-center\">\n              <RadarChart width={320} height={260} data={radarData}>\n                <PolarGrid stroke=\"#30363d\" />\n                <PolarAngleAxis dataKey=\"subject\" tick={{ fill: '#8b949e', fontSize: 11 }} />\n                <PolarRadiusAxis angle={30} domain={[0, 10]} tick={{ fill: '#8b949e', fontSize: 9 }} />\n                <Radar name=\"Equipo\" dataKey=\"A\" stroke=\"#00d4ff\" fill=\"#00d4ff\" fillOpacity={0.2} />\n              </RadarChart>\n            </div>\n          </CardContent>\n        </Card>\n      \\)}\n    </div>\n  \\)\n}\nEOF)",
      "Bash(ls:*)",
      "Bash(\"/Users/jiq/Downloads/SMC DASHBOARD/frontend/src/vite-env.d.ts\" << 'EOF'\n/// <reference types=\"vite/client\" />\nEOF)",
      "Bash(python3:*)",
      "Bash(PATH=\"/Users/jiq/.nvm/versions/node/v20.20.0/bin:/usr/bin:/bin\" npx vite build:*)",
      "Bash(/usr/local/bin/docker compose:*)",
      "Bash(git init:*)",
      "Bash(git branch:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(curl:*)",
      "Bash(xargs:*)"
    ]
  }
}
